package pl.restaurant.ejb;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import pl.kurs.komis.Car;
import pl.restaurant.Client;
import pl.restaurant.CreatingOrder;
import pl.restaurant.Order;

@Stateless
public class CreatingOrderEjb implements CreatingOrder{

	@PersistenceContext(name="clientManager")
	EntityManager manager;
	
	@Override
	public void create(Order order) {
		manager.persist(order);
	}

	@Override
	public Order findById(int id) {
		return manager.find(Order.class, id);
	}

	@Override
	public void updateOrder(Order order) {
		order = manager.merge(order);
	}

	@Override
	public void delete(int id) {
		Order order = manager.find(Order.class, id);
		manager.remove(order);
	}

	@Override
	public List<Order> findOrdersByCustomerId(int idc) {
		Query q = manager.createQuery("select o from Order o where o.idc like :idc");
		q.setParameter("idc", idc);
		@SuppressWarnings("unchecked")
		List<Order> orderList =q.getResultList();
		return orderList;
	}

}
